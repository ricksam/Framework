using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Script.Serialization;

namespace lib.Class
{
  public class JSON
  {
    public string Serialize(object o)
    {
      System.Text.StringBuilder txt = new System.Text.StringBuilder();
      JavaScriptSerializer jav = new JavaScriptSerializer();
      jav.Serialize(o, txt);
      return txt.ToString();
    }

    public T Deserialize<T>(string s)
    {
      JavaScriptSerializer jav = new JavaScriptSerializer();
      return jav.Deserialize<T>(s);
    }

    public void AdjustTimeZone(object object_class)
    {
      lib.Class.ObjectAttribute obj = new ObjectAttribute(object_class);
      string[] atrbs = obj.GetAttributes();
      for (int i = 0; i < atrbs.Length; i++)
      {
        object val = obj.GetAttribute(atrbs[i]);
        if (val is DateTime)
        { obj.SetAttibute(atrbs[i], Convert.ToDateTime(val).AddHours(lib.Class.Utils.TimeZone)); }
      }
    }
  }
}